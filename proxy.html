<!DOCTYPE html>
<html>
    <head>
        <title>Proxy</title>
        <link rel="icon" type="image/x-icon" href="favicon.png">

        <link rel="stylesheet" href="https://www.w3schools.com/w3css/4/w3.css">
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
        <link id="styles" rel="stylesheet" href="css/boldColorThemes.css">
        <link rel="stylesheet" href="css/toDoStyles.css">
        <link id="styles" rel="stylesheet" href="css/toggle.css">
                
        <script type="text/javascript" src="js/Test.js"></script>
        <script type="text/javascript" src="js/daysCode.js"></script>
        <script type="text/javascript" src="js/voice.js"></script>
        <script type="text/javascript" src="js/settings.js"></script>
        <script type="text/javascript" src="js/confetti.js"></script>
        <script src="https://cdn.jsdelivr.net/npm/canvas-confetti@1.4.0/dist/confetti.browser.min.js"></script>
    </head>
    
    <body onload="Main()" class= "w3-theme-l2" >
      

    <!--***MAIN BODY***-->

    <div class="w3-row w3-border-0 ">
      <div class="w3-quarter w3-container w3-hide-small" ></div>
      <div class=" w3-theme-l5 w3-half w3-container w3-padding-16 w3-card-4">
        <div class="buttonContainer w3-theme-l3 w3-right w3-padding w3-round-xxlarge">
      
    <!***SETTINGS***-->  
          <div class="w3-dropdown-click w3-right" style="background-color: rgba(0, 0, 0, 0);">  <!--Creates container for dropdown-->
            <button id="btnSettings" onclick="dropSettings()" class="w3-btn btnCircle w3-circle w3-theme-d4 w3-hover-text-theme w3-ripple">
              <i id="btnSettings" class="fa fa-cog" aria-hidden="true"></i></button>
            <div id="lstSettings" class="w3-dropdown-content w3-bar-block w3-border" style="min-width: 80px; width: 80px; margin-left: -10px;">
              <option id="about" class="w3-theme-l5 w3-hover-theme w3-hover-text-theme" value="about">About</option>
              <option id="how-To" class="w3-theme-l5 w3-hover-theme w3-hover-text-theme" value="how-to">How-To</option>
                        
      <!--***Confetti***-->
              <div class="w3-dropdown-click">
                <option onclick="dropConfetti()" id="setConfetti" class="w3-theme-l5 w3-hover-theme w3-hover-text-theme" value="confetti">Confetti</option>
                <div id="chkConfetti" class=" w3-container w3-dropdown-content w3-bar-block w3-border w3-theme-l5" style="min-width: 200px; width: 100px; margin-left: -110px">
                <p></p>
                <header class="w3-container">
                <button id="closeConfetti" class="btnCircle w3-btn w3-circle w3-theme-d4 w3-ripple w3-medium w3-display-topright">&times;</button>  
              </header><br><br>
              
              <label id="lblOff">Off</label><label class="switch ">
                  <input id="tglConfetti" type="checkbox" checked class="w3-check w3-theme-d5" value ="toggle">
                  <span class="slider round"></span>
                </label><label id="lblOn">On</label><br><br>
              </div>
              </div>
      <!--***Colors***-->  
              <div class="w3-dropdown-click">
                <option onclick="dropColor()" id="colors" class="w3-theme-l5 w3-hover-theme w3-hover-text-theme" value="colors">Colors</option>
                <div id="lstColor" class="w3-dropdown-content w3-bar-block w3-border w3-theme-l5" style="min-width: 200px; width: 100px; margin-left: -110px">
                  <input id="rdBlue" class="w3-radio" type="radio" name="color" value="blue" onclick="getColor(value)" checked> Blue<br>
                  <input id="rdPeach" class="w3-radio" type="radio" name="color" value="peach" onclick="getColor(value)"> Peach<br>
                  <input id="rdGold" class="w3-radio" type="radio" name="color" value="gold" onclick="getColor(value)"> Goldenrod<br>
                  <input id="rdBold" class="w3-radio" type="radio" name="color" value="bold" onclick="getColor(value)"> Bold<br>
                  <p></p>
                  <div class="w3-center">
                    <button id="btnSave" class="w3-btn w3-ripple  w3-theme-d4 w3-round-xxlarge w3-small">save</button>
                    <button id="btnClose" class="w3-btn w3-ripple  w3-theme-d4 w3-round-xxlarge w3-small">close</button>
                    <p></p>
                  </div>  
                </div>
              </div>
            </div>
          </div>

    <!--***RECURRING DAYS***-->  
          <div class="w3-dropdown-click w3-right" style="background-color: rgba(0, 0, 0, 0);">  <!--Creates container for dropdown-->
            <button id="btnDropDown"  class="w3-btn btnCircle w3-circle w3-theme-d4 w3-hover-text-theme w3-ripple"><i id="btnDropDown" class="fa fa-repeat" aria-hidden="true"></i></button>
            <div id="lstDays" class="w3-dropdown-content w3-bar-block w3-border" style="min-width: 125px; width: 100px; margin-left: -70px">
              <option class="w3-theme-l5"  value="" disabled selected>Select a day</option> 
              <option id="Everyday"class="w3-theme-l5 w3-hover-theme w3-hover-text-theme" value="Everyday">Everyday</option>
              <option id="Monday"class="w3-theme-l5 w3-hover-theme w3-hover-text-theme" value="Monday">Monday</option>
              <option id="Tuesday"class="w3-theme-l5 w3-hover-theme w3-hover-text-theme" value="Tuesday">Tuesday</option>
              <option id="Wednesday" class="w3-theme-l5 w3-hover-theme w3-hover-text-theme" value="Wednesday">Wednesday</option>
              <option id="Thursday" class="w3-theme-l5 w3-hover-theme w3-hover-text-theme" value="Thursday">Thursday</option>
              <option id="Friday" class="w3-theme-l5 w3-hover-theme w3-hover-text-theme" value="Friday">Friday</option>
              <option id="Saturday" class="w3-theme-l5 w3-hover-theme w3-hover-text-theme" value="Saturday">Saturday</option>
              <option id="Sunday" class="w3-theme-l5 w3-hover-theme w3-hover-text-theme" value="Sunday">Sunday</option>
            </div>
          </div>
    <!--***VOICE, DELETE, AND ADD-->  
            <button id="btnVoice" class="btnCircle w3-btn w3-theme-d4 w3-hover-text-theme w3-right w3-circle" ><i class="fa fa-microphone" aria-hidden="true"></i></button>  
            <button id="btnClear" class="btnCircle w3-btn w3-theme-d4 w3-hover-text-theme w3-ripple w3-right w3-circle" onclick="clearList()"><i class="fa fa-trash"></i></button>
            <button id="btnAdd" class="btnCircle w3-btn w3-theme-d4 w3-hover-text-theme w3-right w3-circle" onclick="getInput()" ><i class="fa fa-plus" aria-hidden="true"></i></button>  
        </div> <!--button container end-->
        
    <!--****HEADING***-->  
        <h1 class="w3-center w3-margin-top w3-margin-bottom w3-theme-d5 w3-round-xxlarge"><span class="w3-theme-l1" style="background-clip: text;
                -webkit-background-clip: text;"><span class="fontStuffClip" >My ToDo List</span></span></h1>
          
    <!--***TEXT INPUT AND CONTAINER FOR CHECKBOXES-->
        <form class="w3-container" id="myList" >
            <input id="inpTask" class="w3-input w3-round-xxlarge w3-border w3-border-theme" type="text">
            <fieldset id="fldHoldList">
              
            </fieldset> <!--creates a space for checkboxes-->
            <p></p>
        </form>  
      </div> <!--end container "half"-->
      <div class="w3-quarter w3-container w3-hide-small" ></div>
    </div>                                                                                           <!--right column-->      
        
    <!--***MODAL***-->
        <div id="day" class="w3-container w3-modal">
          <div class="w3-container w3-modal-content">
            <header class="w3-container"> 
              <button id="btnDays" onclick="document.getElementById('day').style.display='none'" class="btnCircle w3-btn w3-circle w3-theme-d4 w3-ripple w3-medium w3-display-topright">&times;</button>
              <h2 id="dayText"></h2>
              <input type="text" id="enterTask" class="w3-input w3-border" placeholder="Enter Task"  >
            </header>
              
          <div class="w3-container">
            <ul id="modalList" class="w3-ul ">
                <li id="0" onclick="removeItem()"><i class="fa fa-trash"></i> Home</li>
                <li id="1" onclick="removeItem()"><i class="fa fa-trash"></i> Jill</li>
                <li id="2" onclick="removeItem()"><i class="fa fa-trash"></i> Eve</li>
                <li id="3" onclick="removeItem()"><i class="fa fa-trash"></i> Adam</li>
            </ul>
          </div>
          
            <footer class="w3-container"><p></p></footer>
          </div>
        </div> <!--end modal-->
  </body>
</html>

<script>
     

//***EVENT LISTENERS***

// Mimics btnAdd click. Enters info
inpTask.addEventListener("keypress", function(event) {
  if (event.key === "Enter") {
        event.preventDefault();
        document.getElementById("btnAdd").click();
    }
});

document.body.addEventListener("click", function(event){
  //event.prevent.default
 
  
  closeDialog( event, event.target.id);
 
});

//Adds gray class to list item when checked. 
document.getElementById("fldHoldList").addEventListener("click", function() {
   boxChecked(event.target);
});

//Adds bold class to label when clicked
document.getElementById("fldHoldList").addEventListener("click", function() {
    makeBold(event.target);
});

//***RECURRING DAYS***

document.getElementById("btnDropDown").addEventListener("click", dropDown);



//Opens modal to selected day when day is clicked
document.getElementById("lstDays").addEventListener("click", function() {
   openModal(event.target.id);
});

//Removes item from list when clicked
document.getElementById("modalList").addEventListener("click", function() {
    removeItem(event.target.id);
});

//Adds input from input box to list
document.getElementById("enterTask").addEventListener("change", getModalInput);

//***VOICE starts listening***/

document.getElementById("btnVoice").addEventListener("click", function() {
    getVoice(event.target.id);
});

//***SETTINGS***/

//Saves color choice
document.getElementById("btnSave").addEventListener("click", saveColor);

//Closes color dialog without saving
document.getElementById("btnClose").addEventListener("click", closeColor);

//Activates confetti
document.getElementById("fldHoldList").addEventListener("click", function(){
  activateConfetti(event.target); });

//closes confetti
document.getElementById("closeConfetti").addEventListener("click", closeConfetti);

//toggles confetti off and on.
document.getElementById("tglConfetti").addEventListener("click", function(){
  toggleOnOff(event.target);  });


    //***TIMEOUT***//  
    //Every morning at midnight, page reloads with new day
                
    var now = new Date();
    var tomorrow = new Date(now.getFullYear(), now.getMonth(), now.getDate()+ 1, 0, 0);
    var reloadTime = tomorrow - now;
    var timer = now + 15000
    if (reloadTime < 0) {
        reloadTime += 86400000; // it's after midnight, try tomorrow.
    }
    setTimeout(function(){
      
      var arrDays = JSON.parse(localStorage.getItem("days"));
      
      for(var i=0; i < arrDays.length; i++){
        arrDays[i].checked = "false";
      }
      
      localStorage.setItem("days", JSON.stringify(arrDays));  
      location.reload(true);

    }, reloadTime);

  </script>
  </body>
</html>